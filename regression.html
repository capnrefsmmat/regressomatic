<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>The Regressomatic 4000</title>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <link rel="stylesheet" href="regression.css">
    <script src="sylvester/sylvester.js"></script>
    <script src="regression.js"></script>
  </head>
  <body>
    <h1>The Regressomatic 4000</h1>
    <p>First, a simple regression and ordinary residuals.</p>
    <table>
      <tr>
        <th>Regression</th>
        <th>Residuals</th>
      </tr>
      <tr>
        <td id="regression"></td>

        <td id="residuals"></td>
      </tr>
    </table>

    <p>Next, let's <em>standardize</em> the residuals. Now try fiddling with the data; notice that as one data point is pulled to become an outlier, the other residuals become smaller, since the residual variance is increasing.</p>

    <table>
      <tr>
        <th>Regression</th>
        <th>Standardized residuals</th>
      </tr>
      <tr>
        <td id="regression2"></td>

        <td id="residuals2"></td>
      </tr>
    </table>

    <p>Next, let's try Cook's distances. The Cook's distance of a data point measures how much the model parameters would change if that point were removed, so it is a very intuitive measure of influence. Notice that if you vertically displace a point near the middle of the line, the distance won't pass 0.6 no matter how hard you try, while a point at either end of the line can easily have a distance over 1.</p>

    <table>
      <tr>
        <th>Regression</th>
        <th>Cook's distances</th>
      </tr>
      <tr>
        <td id="regression3"></td>

        <td id="residuals3"></td>
      </tr>
    </table>

    <p>Next, leverage.</p>

    <table>
      <tr>
        <th>Regression</th>
        <th>Leverage</th>
      </tr>
      <tr>
        <td id="regression4"></td>
        <td id="residuals4"></td>
      </tr>
    </table>

    <p>Finally, quantile-quantile plots of the standardized residuals.</p>

    <table>
      <tr>
        <th>Regression</th>
        <th>Q-Q plot</th>
      </tr>
      <tr>
        <td id="regression5"></td>
        <td id="residuals5"></td>
      </tr>
    </table>

    <script>
     // Data and setup
     var pts = [[30, 30],
                [200, 200],
                [37, 84],
                [83, 103],
                [142, 121],
                [421, 333],
                [321, 231],
                [382, 292],
                [401, 342]];

     var opts = {
       width: 480,
       height: 400,
       padding: 40,

       ptRadius: 5,
       hoverRadius: 8,

       ptColor: "#666",
       hoverColor: "blue"
     };

     regressionPlots(d3.select("#regression"), d3.select("#residuals"),
                     pts, opts, "residuals");

     regressionPlots(d3.select("#regression2"), d3.select("#residuals2"),
                     deepClone(pts), opts, "rstandard");

     regressionPlots(d3.select("#regression3"), d3.select("#residuals3"),
                     deepClone(pts), opts, "cooks");

     regressionPlots(d3.select("#regression4"), d3.select("#residuals4"),
                     deepClone(pts), opts, "leverage");

     regressionPlots(d3.select("#regression5"), d3.select("#residuals5"),
                     deepClone(pts), opts, "qqnorm");
    </script>

  </body>
</html>
